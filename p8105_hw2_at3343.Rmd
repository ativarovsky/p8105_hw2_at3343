---
title: "Homework 2"
author: "Alice Tivarovsky"
date: "9/26/2019"
output: github_document
---
# Problem 1

## Mr Trash Wheel Data
We are reading in the Mr. Trash Wheel dataset, stored as an excel file. We will also remove the last column, which contains notes. 

```{r data_frame1}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(readxl)

# Importing Mr Trash Data
mr_trash_data = read_excel("../data/mr_trash_dataset.xlsx")
mr_trash_data = janitor::clean_names(mr_trash_data)

# Removing last column of comments
mr_trash_data = select(mr_trash_data, -x15)
```

The "raw" dataframe contains 336 entries and 15 columns. 

We will now remove any rows that have dumpster = NA and convert the column "sports_balls" to an integer vector rounded to the nearest whole number. 

```{r data_frame2}

# Removing rows with "NA" for dumpster
mr_trash_data = drop_na(mr_trash_data, dumpster)

# Rounding sports_balls to nearest integer
mr_trash_data = mutate(mr_trash_data, sports_balls = round(as.integer(sports_balls, digits = 0)))

```

## Precipitatin Data

We will now import and clean 2017 and 2018 precipitation data from the Mr. Trash Wheel excel file.  

```{r data_frame3}
# Importing 2017 and 2018 precipitation data
precip_data_18 = read_excel("../data/mr_trash_dataset.xlsx",3)
precip_data_17 = read_excel("../data/mr_trash_dataset.xlsx",4)
precip_data_18 = janitor::clean_names(precip_data_18)
precip_data_17 = janitor::clean_names(precip_data_17)
```

We note that the 2017 dataset is complete, but the 2018 dataset is missing values for August - December. We also note that both datasets contain a row at the end with total precipitation for the year, which we don't need. We will omit these rows, along with the missing values in 2018, and add a year variable before combining the datasets. 

```{r data_frame4}
# USE PIPE HERE AND ROUND TO TWO DECIMALS

# Removing rows with "NA" for precipation 
precip_data_17 = drop_na(precip_data_17, precipitation_in)
precip_data_18 = drop_na(precip_data_18, precipitation_in)
precip_data_18 = drop_na(precip_data_18, x2)

# Removing top row 
precip_data_17 = filter(precip_data_17, precipitation_in != "Month")
precip_data_18 = filter(precip_data_18, precipitation_in != "Month")

# Renaming precipitation columns with year
precip_data_17 = rename(precip_data_17, precip_2017 = x2)
precip_data_18 = rename(precip_data_18, precip_2018 = x2)
```

Next, we will combine the precipitation data for 2017 and 2018 using a left-join, since 2017 contains more data than 2018. 

```{r data_frame5}

precip_data =  
  left_join(precip_data_17, precip_data_18, by = "precipitation_in")

# FIGURE OUT WHY PIPE DOESNT WORK HERE
precip_data =
  mutate(precip_data, precipitation_in = as.numeric(precipitation_in),
         precipitation_in = month.name[precipitation_in]) %>% 
  rename(month = precipitation_in)
    
```



# Problem 2

# Pols Data

First, we read and clean the pols-month dataset. 

```{r}
pols_month = 
  read_csv(file = "../data/pols-month.csv") %>% 
  janitor::clean_names() %>% 
  separate(mon, c("year", "month", "day"), "-") %>% 
  mutate(month = as.numeric(month),
         month = month.name[month]) %>% 
  # FIX THE PRESIDENT LOGICAL OPERATOR
  mutate(president = prez_dem == 1) %>% 
  select(-prez_dem, -prez_gop, -day)

pols_month
``` 

Next, we read and clean the snp dataset. 

```{r}
snp_data = 
  read_csv(file = "../data/snp.csv") %>% 
  janitor::clean_names()  %>% 
  separate(date, c("month", "day", "year"), "/") %>% 
  select(year, month, day, everything()) %>% 
  mutate(month = as.integer(month)) %>% 
  mutate(month = month.name[month]) %>% 
  arrange(year, month)

snp_data
```

Next, we read and clean the unemployment dataset. This entails switching the format from wide to long 

```{r}
unemp_data = 
  read_csv(file = "../data/unemployment.csv") %>% 
  janitor::clean_names() %>%   
  pivot_longer(jan:dec, 
             names_to = "month",
             values_to = "unemployment") %>% 
  # NOT WORKING
  mutate(month = as.numeric(month), month = month.name[month]) 

unemp_data
```

Finally, we combine the three datasets....



# Problem 3

Reading and tidying baby names dataset. 

```{r}
unemp_data = 
  read_csv(file = "../data/Popular_Baby_Names.csv") %>% 
  janitor::clean_names()

unemp_data
```


