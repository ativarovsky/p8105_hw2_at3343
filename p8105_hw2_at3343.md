Homework 2
================
Alice Tivarovsky
9/26/2019

# Problem 1

## Mr Trash Wheel Data

We are reading in the Mr. Trash Wheel dataset, stored as an excel file.
We will also remove the last column, which contains notes.

``` r
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
```

    ## ── Attaching packages ──────────────────────────────────── tidyverse 1.2.1 ──

    ## ✔ ggplot2 3.2.1     ✔ purrr   0.3.2
    ## ✔ tibble  2.1.3     ✔ dplyr   0.8.3
    ## ✔ tidyr   1.0.0     ✔ stringr 1.4.0
    ## ✔ readr   1.3.1     ✔ forcats 0.4.0

    ## ── Conflicts ─────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()

``` r
library(readxl)

# Importing Mr Trash Data
mr_trash_data = read_excel("../data/mr_trash_dataset.xlsx")
```

    ## New names:
    ## * `` -> ...15

``` r
mr_trash_data = janitor::clean_names(mr_trash_data)

# Removing last column of comments
mr_trash_data = select(mr_trash_data, -x15)
```

The “raw” dataframe contains 336 entries and 15 columns.

We will now remove any rows that have dumpster = NA and convert the
column “sports\_balls” to an integer vector rounded to the nearest whole
number.

``` r
# Removing rows with "NA" for dumpster
mr_trash_data = drop_na(mr_trash_data, dumpster)

# Rounding sports_balls to nearest integer
mr_trash_data = mutate(mr_trash_data, sports_balls = round(as.integer(sports_balls, digits = 0)))
```

## Precipitatin Data

We will now import and clean 2017 and 2018 precipitation data from the
Mr. Trash Wheel excel file.

``` r
# Importing 2017 and 2018 precipitation data
precip_data_18 = read_excel("../data/mr_trash_dataset.xlsx",3)
```

    ## New names:
    ## * `` -> ...2

``` r
precip_data_17 = read_excel("../data/mr_trash_dataset.xlsx",4)
```

    ## New names:
    ## * `` -> ...2

``` r
precip_data_18 = janitor::clean_names(precip_data_18)
precip_data_17 = janitor::clean_names(precip_data_17)
```

We note that the 2017 dataset is complete, but the 2018 dataset is
missing values for August - December. We also note that both datasets
contain a row at the end with total precipitation for the year, which we
don’t need. We will omit these rows, along with the missing values in
2018, and add a year variable before combining the datasets.

``` r
# USE PIPE HERE AND ROUND TO TWO DECIMALS

# Removing rows with "NA" for precipation 
precip_data_17 = drop_na(precip_data_17, precipitation_in)
precip_data_18 = drop_na(precip_data_18, precipitation_in)
precip_data_18 = drop_na(precip_data_18, x2)

# Removing top row 
precip_data_17 = filter(precip_data_17, precipitation_in != "Month")
precip_data_18 = filter(precip_data_18, precipitation_in != "Month")

# Renaming precipitation columns with year
precip_data_17 = rename(precip_data_17, precip_2017 = x2)
precip_data_18 = rename(precip_data_18, precip_2018 = x2)
```

Next, we will combine the precipitation data for 2017 and 2018 using a
left-join, since 2017 contains more data than 2018.

``` r
precip_data =  
  left_join(precip_data_17, precip_data_18, by = "precipitation_in")

# FIGURE OUT WHY PIPE DOESNT WORK HERE
precip_data =
  mutate(precip_data, precipitation_in = as.numeric(precipitation_in),
         precipitation_in = month.name[precipitation_in]) %>% 
  rename(month = precipitation_in)
```

# Problem 2

# Pols Data

First, we read and clean the pols-month dataset.

``` r
pols_month = 
  read_csv(file = "../data/pols-month.csv") %>% 
  janitor::clean_names() %>% 
  separate(mon, c("year", "month", "day"), "-") %>% 
  mutate(month = as.numeric(month),
         month = month.name[month]) %>% 
  # FIX THE PRESIDENT LOGICAL OPERATOR
  mutate(president = prez_dem == 1) %>% 
  select(-prez_dem, -prez_gop, -day)
```

    ## Parsed with column specification:
    ## cols(
    ##   mon = col_date(format = ""),
    ##   prez_gop = col_double(),
    ##   gov_gop = col_double(),
    ##   sen_gop = col_double(),
    ##   rep_gop = col_double(),
    ##   prez_dem = col_double(),
    ##   gov_dem = col_double(),
    ##   sen_dem = col_double(),
    ##   rep_dem = col_double()
    ## )

``` r
pols_month
```

    ## # A tibble: 822 x 9
    ##    year  month    gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem president
    ##    <chr> <chr>      <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> <lgl>    
    ##  1 1947  January       23      51     253      23      45     198 TRUE     
    ##  2 1947  February      23      51     253      23      45     198 TRUE     
    ##  3 1947  March         23      51     253      23      45     198 TRUE     
    ##  4 1947  April         23      51     253      23      45     198 TRUE     
    ##  5 1947  May           23      51     253      23      45     198 TRUE     
    ##  6 1947  June          23      51     253      23      45     198 TRUE     
    ##  7 1947  July          23      51     253      23      45     198 TRUE     
    ##  8 1947  August        23      51     253      23      45     198 TRUE     
    ##  9 1947  Septemb…      23      51     253      23      45     198 TRUE     
    ## 10 1947  October       23      51     253      23      45     198 TRUE     
    ## # … with 812 more rows

Next, we read and clean the snp dataset.

``` r
snp_data = 
  read_csv(file = "../data/snp.csv") %>% 
  janitor::clean_names()  %>% 
  separate(date, c("month", "day", "year"), "/") %>% 
  select(year, month, day, everything()) %>% 
  mutate(month = as.integer(month)) %>% 
  mutate(month = month.name[month]) %>% 
  arrange(year, month)
```

    ## Parsed with column specification:
    ## cols(
    ##   date = col_character(),
    ##   close = col_double()
    ## )

``` r
snp_data
```

    ## # A tibble: 787 x 4
    ##    year  month    day   close
    ##    <chr> <chr>    <chr> <dbl>
    ##  1 1950  April    3      18.0
    ##  2 1950  August   1      18.4
    ##  3 1950  December 1      20.4
    ##  4 1950  February 1      17.2
    ##  5 1950  January  3      17.0
    ##  6 1950  July     3      17.8
    ##  7 1950  June     1      17.7
    ##  8 1950  March    1      17.3
    ##  9 1950  May      1      18.8
    ## 10 1950  November 1      19.5
    ## # … with 777 more rows

Next, we read and clean the unemployment dataset. This entails switching
the format from wide to long

``` r
unemp_data = 
  read_csv(file = "../data/unemployment.csv") %>% 
  janitor::clean_names() %>%   
  pivot_longer(jan:dec, 
             names_to = "month",
             values_to = "unemployment") %>% 
  # NOT WORKING
  mutate(month = as.numeric(month), month = month.name[month]) 
```

    ## Parsed with column specification:
    ## cols(
    ##   Year = col_double(),
    ##   Jan = col_double(),
    ##   Feb = col_double(),
    ##   Mar = col_double(),
    ##   Apr = col_double(),
    ##   May = col_double(),
    ##   Jun = col_double(),
    ##   Jul = col_double(),
    ##   Aug = col_double(),
    ##   Sep = col_double(),
    ##   Oct = col_double(),
    ##   Nov = col_double(),
    ##   Dec = col_double()
    ## )

    ## Warning: NAs introduced by coercion

``` r
unemp_data
```

    ## # A tibble: 816 x 3
    ##     year month unemployment
    ##    <dbl> <chr>        <dbl>
    ##  1  1948 <NA>           3.4
    ##  2  1948 <NA>           3.8
    ##  3  1948 <NA>           4  
    ##  4  1948 <NA>           3.9
    ##  5  1948 <NA>           3.5
    ##  6  1948 <NA>           3.6
    ##  7  1948 <NA>           3.6
    ##  8  1948 <NA>           3.9
    ##  9  1948 <NA>           3.8
    ## 10  1948 <NA>           3.7
    ## # … with 806 more rows

Finally, we combine the three datasets….

# Problem 3

Reading and tidying baby names dataset.

``` r
pop_names = 
  read_csv(file = "../data/Popular_Baby_Names.csv") %>% 
  janitor::clean_names() %>% 
  mutate(gender,  "ASIAN AND PACIFIC ISLANDER" = "ASIAN AND PACI", "BLACK NON HISPANIC" = "BLACK NON HISP", "WHITE NON HISPANIC" = "WHITE NON HISP") %>% 
  mutate(childs_first_name = toupper(childs_first_name))
```

    ## Parsed with column specification:
    ## cols(
    ##   `Year of Birth` = col_double(),
    ##   Gender = col_character(),
    ##   Ethnicity = col_character(),
    ##   `Child's First Name` = col_character(),
    ##   Count = col_double(),
    ##   Rank = col_double()
    ## )

``` r
pop_names
```

    ## # A tibble: 19,418 x 9
    ##    year_of_birth gender ethnicity childs_first_na… count  rank
    ##            <dbl> <chr>  <chr>     <chr>            <dbl> <dbl>
    ##  1          2016 FEMALE ASIAN AN… OLIVIA             172     1
    ##  2          2016 FEMALE ASIAN AN… CHLOE              112     2
    ##  3          2016 FEMALE ASIAN AN… SOPHIA             104     3
    ##  4          2016 FEMALE ASIAN AN… EMILY               99     4
    ##  5          2016 FEMALE ASIAN AN… EMMA                99     4
    ##  6          2016 FEMALE ASIAN AN… MIA                 79     5
    ##  7          2016 FEMALE ASIAN AN… CHARLOTTE           59     6
    ##  8          2016 FEMALE ASIAN AN… SARAH               57     7
    ##  9          2016 FEMALE ASIAN AN… ISABELLA            56     8
    ## 10          2016 FEMALE ASIAN AN… HANNAH              56     8
    ## # … with 19,408 more rows, and 3 more variables: `ASIAN AND PACIFIC
    ## #   ISLANDER` <chr>, `BLACK NON HISPANIC` <chr>, `WHITE NON
    ## #   HISPANIC` <chr>
